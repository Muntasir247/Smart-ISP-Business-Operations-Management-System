<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Promee International - Employee List</title>
  <link rel="stylesheet" href="assets/css/style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=DM+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet"/>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --primary-color: #0d1b2a;
      --accent-color:  #1b263b;
      --active-menu-bg:#102a43;
      --bg:        #f1f3f7;
      --surface:   #FDFCFA;
      --ink:       #102a43;
      --ink2:      #5A5A52;
      --ink3:      #9A9A90;
      --gold:      #204b71;
      --gold-light:#b4cde9;
      --teal:      #2A7A6A;
      --teal-light:#D6EDEA;
      --danger:    #C0392B;
      --danger-light:#FDECEA;
      --border:    #E2DDD4;
      --shadow:    0 2px 12px rgba(24,24,26,0.08);
      --shadow-lg: 0 8px 40px rgba(24,24,26,0.12);
      --radius:    12px;
      --navy-primary: #0f1d3f;
      --navy-dark:    #0f1d3f;
      --navy-darker:  #0a1628;
      --gray-50:  #f9fafb;
      --gray-100: #f3f4f6;
      --gray-200: #e5e7eb;
      --gray-300: #d1d5db;
      --gray-400: #9ca3af;
      --gray-500: #6b7280;
      --gray-600: #4b5563;
      --gray-700: #374151;
      --gray-800: #1f2937;
      --gray-900: #111827;
      --success:  #10b981;
      --warning:  #f59e0b;
      --info:     #3b82f6;
    }

    html, body { height: 100%; }
    body { font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif; background: var(--bg); color: var(--ink); font-size: 14px; line-height: 1.6; }

    .dashboard { display: flex; height: 100vh; overflow: hidden; }

    .main-content {
      flex: 1;
      display: flex;
      flex-direction: column;
      min-width: 0;
    }
    .main-inner {
      flex: 1;
      overflow-y: auto;
      padding: 24px 32px;
    }

    /* ══════════ SIDEBAR ══════════ */
    .sidebar { width: 250px; background-color: var(--primary-color); color: #fff; display: flex; flex-direction: column; overflow-y: auto; flex-shrink: 0; transition: margin-left 0.3s; }
    .sidebar.collapsed { margin-left: -250px; }
    .brand { padding: 15px 20px; font-size: 18px; font-weight: bold; display: flex; align-items: center; border-bottom: 1px solid rgba(255,255,255,0.1); }
    .brand i { margin-right: 10px; }
    .menu { list-style: none; padding: 0; margin-top: 10px; }
    .menu li { border-bottom: 1px solid rgba(255,255,255,0.05); }
    .menu li a { display: block; padding: 12px 20px; color: #b0b8c1; text-decoration: none; font-size: 14px; transition: background 0.2s, color 0.2s; }
    .menu li a:hover, .menu li a.active { background-color: var(--active-menu-bg); color: #fff; border-left: 4px solid #3498db; }
    .menu li a i { width: 25px; text-align: center; margin-right: 5px; }
    .submenu { list-style: none; padding-left: 0; max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out; background-color: rgba(0,0,0,0.2); }
    .has-submenu.open .submenu { max-height: 600px; }
    .has-submenu.open > a .fa-caret-right { transform: rotate(90deg); transition: transform 0.3s; }
    .submenu li a { padding-left: 45px; font-size: 13px; border: none; color: #b0b8c1; background: transparent; }
    .submenu li a:hover { color: white; }
    .submenu li a i { font-size: 8px; width: 15px; text-align: center; margin-right: 10px; }

    /* ══════════ HEADER — updated to match position.html ══════════ */

    .search-box { position: relative; }
    .search-box input { height: 34px; width: 260px; padding: 0 35px 0 12px; border-radius: 6px; border: none; outline: none; }
    .search-box i { position: absolute; right: 10px; top: 50%; transform: translateY(-50%); color: #555; }
    /*.header-right { display: flex; align-items: center; gap: 25px; font-size: 14px; }*/
    .header-right > div { display: flex; align-items: center; gap: 6px; cursor: pointer; }
    .h-badge { background: red; color: #fff; font-size: 10px; padding: 2px 6px; border-radius: 50px; margin-left: 4px; }
    /* Home & Log Out button style — same as position.html / resignation.html */

    /* ══════════ PAGE HEADER ══════════ */
    .page-header {
      background: white;
      padding: 24px 32px;
      margin-bottom: 24px;
      border-bottom: 1px solid var(--gray-200);
      display: flex;
      justify-content: space-between;
      align-items: flex-end;
      flex-wrap: wrap;
      gap: 12px;
    }
    .page-header-left h1 { font-size: 28px; font-weight: 700; color: var(--ink); margin-bottom: 6px; display: flex; align-items: flex-end; gap: 12px; }
    .page-header-left h1 i { color: var(--navy-primary); }
    .page-header-left p { color: var(--gray-500); font-size: 14px; }

    /* ══════════ TOPBAR ══════════ */
    .topbar { display: flex; align-items: center; justify-content: space-between; padding: 14px 24px 10px; border-bottom: 1px solid var(--border); background: var(--surface); flex-shrink: 0; }
    .page-title { font-size: 18px; font-weight: 700; color: var(--ink); }

    /* ══════════ PAGE CONTENT ══════════ */
    .page-content { padding: 20px 24px; }

    /* ══════════ STAT CARDS ══════════ */
    .stats-row { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-bottom: 18px; }
    .stat-card { background: var(--surface); border-radius: var(--radius); padding: 18px 18px 16px; box-shadow: var(--shadow); display: flex; align-items: center; gap: 14px; border: 1px solid var(--border); border-top: 4px solid #ccc; overflow: hidden; transition: box-shadow 0.2s; }
    .stat-card:hover { box-shadow: var(--shadow-lg); }
    .stat-icon-wrap { width: 44px; height: 44px; border-radius: 10px; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
    .stats-row-1 .stat-card:nth-child(1) { border-top-color: #204b71; }
    .stats-row-1 .stat-card:nth-child(1) .stat-icon-wrap { background: #e8f0fb; color: #204b71; }
    .stats-row-1 .stat-card:nth-child(2) { border-top-color: #c87f0a; }
    .stats-row-1 .stat-card:nth-child(2) .stat-icon-wrap { background: #fef3e2; color: #c87f0a; }
    .stats-row-1 .stat-card:nth-child(3) { border-top-color: #2A7A6A; }
    .stats-row-1 .stat-card:nth-child(3) .stat-icon-wrap { background: #e6f7f3; color: #2A7A6A; }
    .stats-row-1 .stat-card:nth-child(4) { border-top-color: #C0392B; }
    .stats-row-1 .stat-card:nth-child(4) .stat-icon-wrap { background: #fdecea; color: #C0392B; }
    .stats-row-2 .stat-card:nth-child(1) { border-top-color: #4f46e5; }
    .stats-row-2 .stat-card:nth-child(1) .stat-icon-wrap { background: #eef2ff; color: #4f46e5; }
    .stats-row-2 .stat-card:nth-child(2) { border-top-color: #be185d; }
    .stats-row-2 .stat-card:nth-child(2) .stat-icon-wrap { background: #fce7f3; color: #be185d; }
    .stats-row-2 .stat-card:nth-child(3) { border-top-color: #065f46; }
    .stats-row-2 .stat-card:nth-child(3) .stat-icon-wrap { background: #ecfdf5; color: #065f46; }
    .stats-row-2 .stat-card:nth-child(4) { border-top-color: #c2410c; }
    .stats-row-2 .stat-card:nth-child(4) .stat-icon-wrap { background: #fff7ed; color: #c2410c; }
    .stat-label { font-size: 12px; color: var(--ink2); margin-bottom: 2px; }
    .stat-value { font-size: 24px; font-weight: 700; color: var(--ink); line-height: 1.1; }
    .stat-sub   { font-size: 11px; color: var(--ink3); margin-top: 2px; }

    /* ══════════ HR SUMMARY BANNER ══════════ */
    .hr-summary { background: linear-gradient(135deg, var(--navy-primary) 0%, var(--navy-darker) 100%); border-radius: var(--radius); padding: 24px 28px; color: white; margin-bottom: 18px; position: relative; overflow: hidden; }
    .hr-summary::before { content:""; position:absolute; top:-50px; right:-50px; width:200px; height:200px; background:rgba(255,255,255,0.05); border-radius:50%; }
    .hr-summary::after { content:""; position:absolute; bottom:-30px; left:120px; width:150px; height:150px; background:rgba(255,255,255,0.03); border-radius:50%; }
    .summary-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; position:relative; z-index:1; }
    .summary-title h2 { font-size:18px; font-weight:700; margin-bottom:3px; }
    .summary-title p { font-size:12px; opacity:0.75; }
    .add-emp-btn { background:white; color:var(--navy-primary); border:none; padding:9px 18px; border-radius:8px; font-weight:600; font-size:13px; cursor:pointer; transition:all 0.2s ease; display:flex; align-items:center; gap:7px; }
    .add-emp-btn:hover { transform:translateY(-2px); box-shadow:0 4px 12px rgba(0,0,0,0.15); }
    .summary-details { display:grid; grid-template-columns:repeat(5,1fr); gap:16px; position:relative; z-index:1; }
    .summary-item h4 { font-size:11px; opacity:0.75; margin-bottom:5px; font-weight:500; text-transform:uppercase; letter-spacing:0.5px; }
    .summary-item p { font-size:18px; font-weight:700; }
    .dept-bar { height:5px; background:rgba(255,255,255,0.2); border-radius:10px; margin-top:6px; overflow:hidden; }
    .dept-fill { height:100%; background:white; border-radius:10px; }

    /* ══════════ QUICK ACTIONS ══════════ */
    .quick-actions { background:var(--surface); border:1px solid var(--border); border-radius:var(--radius); padding:18px 20px; margin-bottom:18px; box-shadow:var(--shadow); }
    .quick-actions-title { font-size:13px; font-weight:700; color:var(--ink); margin-bottom:12px; text-transform:uppercase; letter-spacing:0.3px; }
    .quick-actions-grid { display:grid; grid-template-columns:repeat(6,1fr); gap:10px; }
    .quick-action-btn { padding:11px; background:var(--bg); border:1px solid var(--border); border-radius:8px; cursor:pointer; transition:all 0.2s ease; text-align:center; font-size:12px; font-weight:600; color:var(--ink2); display:flex; flex-direction:column; align-items:center; gap:5px; }
    .quick-action-btn:hover { background:var(--gold); color:white; border-color:var(--gold); transform:translateY(-2px); box-shadow:0 4px 12px rgba(32,75,113,0.2); }
    .quick-action-btn i { font-size:17px; }

    /* ══════════ FILTER BOX ══════════ */
    .filter-box { background:var(--surface); border-radius:var(--radius); border:1px solid var(--border); padding:16px 20px; margin-bottom:18px; box-shadow:var(--shadow); }
    .filter-box h3 { font-size:13px; font-weight:600; color:var(--ink); display:flex; align-items:center; gap:6px; margin-bottom:12px; }
    .filter-row { display:flex; align-items:flex-end; gap:12px; flex-wrap:wrap; }
    .filter-group { display:flex; flex-direction:column; gap:4px; }
    .filter-group label { font-size:12px; color:var(--ink2); font-weight:600; text-transform:uppercase; letter-spacing:0.3px; }
    .filter-group select, .filter-group input { border:1px solid var(--border); border-radius:8px; padding:8px 10px; font-size:13px; background:var(--bg); color:var(--ink); outline:none; min-width:150px; font-family:inherit; transition:border-color 0.2s; }
    .filter-group select:focus, .filter-group input:focus { border-color:var(--gold); }
    .btn-apply { display:flex; align-items:center; gap:6px; background:var(--gold); color:#fff; border:none; border-radius:8px; padding:9px 16px; font-size:13px; font-weight:600; cursor:pointer; transition:opacity .15s; }
    .btn-apply:hover { opacity:.88; }
    .btn-reset { display:flex; align-items:center; gap:6px; background:var(--bg); color:var(--ink2); border:1px solid var(--border); border-radius:8px; padding:9px 14px; font-size:13px; font-weight:500; cursor:pointer; transition:background .15s; }
    .btn-reset:hover { background:var(--border); }

    /* ══════════ TABLE BOX ══════════ */
    .table-box { background:var(--surface); border-radius:var(--radius); border:1px solid var(--border); box-shadow:var(--shadow); overflow:hidden; margin-bottom:24px; }
    .table-topbar { display:flex; align-items:center; justify-content:space-between; padding:14px 20px; border-bottom:1px solid var(--border); }
    .table-topbar h3 { font-size:14px; font-weight:600; color:var(--ink); display:flex; align-items:center; gap:8px; }
    .record-count { font-size:11px; color:var(--ink3); background:var(--bg); border-radius:99px; padding:2px 10px; font-weight:400; }
    .table-top-right { display:flex; gap:8px; align-items:center; }
    .btn-add { display:flex; align-items:center; gap:6px; background:var(--gold); color:#fff; border:none; border-radius:8px; padding:7px 14px; font-size:12.5px; font-weight:600; cursor:pointer; transition:opacity .15s; }
    .btn-add:hover { opacity:.88; }
    .btn-export { display:flex; align-items:center; gap:6px; background:var(--bg); color:var(--ink2); border:1px solid var(--border); border-radius:8px; padding:7px 14px; font-size:12.5px; font-weight:500; cursor:pointer; transition:background .15s; }
    .btn-export:hover { background:var(--border); }
    .view-toggle { display:flex; gap:4px; }
    .view-btn { padding:7px 11px; border:1px solid var(--border); background:var(--bg); border-radius:6px; cursor:pointer; color:var(--ink3); font-size:13px; transition:all 0.2s; }
    .view-btn.active { background:var(--gold); color:white; border-color:var(--gold); }

    /* ══════════ BULK ACTIONS BAR ══════════ */
    .bulk-actions-bar { display:none; background:#eef4fb; border-bottom:1px solid var(--border); padding:10px 20px; align-items:center; justify-content:space-between; }
    .bulk-actions-bar.show { display:flex; }
    .selected-count { font-size:13px; font-weight:600; color:var(--gold); }
    .bulk-btns { display:flex; gap:8px; }
    .bulk-btn { display:flex; align-items:center; gap:5px; border:1px solid var(--border); border-radius:7px; padding:5px 12px; font-size:12px; cursor:pointer; background:var(--surface); color:var(--ink2); }
    .bulk-btn.del-btn { color:var(--danger); border-color:#f5c6c1; background:var(--danger-light); }

    /* ══════════ TABLE ══════════ */
    table { width:100%; border-collapse:collapse; }
    thead tr { background:var(--bg); }
    th { padding:11px 14px; text-align:left; font-size:11px; font-weight:700; color:var(--ink2); border-bottom:1px solid var(--border); white-space:nowrap; text-transform:uppercase; letter-spacing:0.4px; }
    td { padding:13px 14px; font-size:13px; color:var(--ink); border-bottom:1px solid var(--border); vertical-align:middle; }
    tbody tr:last-child td { border-bottom:none; }
    tbody tr:hover { background:#f8f9fc; }
    .checkbox { width:15px; height:15px; accent-color:var(--gold); cursor:pointer; }

    .emp-cell { display:flex; align-items:center; gap:10px; }
    .emp-avatar { width:36px; height:36px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:13px; font-weight:700; color:#fff; flex-shrink:0; }
    .emp-name { font-weight:600; color:var(--ink); font-size:13px; }
    .emp-email { font-size:11px; color:var(--ink3); }

    .dept-badge { display:inline-block; border-radius:6px; padding:3px 10px; font-size:11px; font-weight:700; text-transform:uppercase; letter-spacing:0.3px; }
    .dept-Technology { background:#dbeafe; color:#1e40af; }
    .dept-HR { background:#fce7f3; color:#9d174d; }
    .dept-Finance { background:#d1fae5; color:#065f46; }
    .dept-Support { background:#fef3c7; color:#92400e; }
    .dept-Sales { background:#ede9fe; color:#5b21b6; }
    .dept-Admin { background:#e5e7eb; color:#374151; }
    .dept-Operations { background:#ffedd5; color:#c2410c; }

    .status-badge { display:inline-flex; align-items:center; gap:5px; border-radius:99px; padding:3px 10px; font-size:11px; font-weight:600; }
    .status-active { background:#d1fae5; color:#065f46; }
    .status-inactive { background:#fee2e2; color:#991b1b; }
    .status-probation { background:#fef3c7; color:#92400e; }
    .status-onleave { background:#e0e7ff; color:#3730a3; }

    .salary-bar { font-size:13px; color:var(--ink); font-weight:600; }
    .salary-bar .cur { color:var(--teal); font-size:11px; margin-right:1px; }

    .action-dropdown { position:relative; display:inline-block; }
    .dropdown-toggle { background:transparent; border:1px solid var(--border); color:var(--ink2); padding:5px 9px; border-radius:6px; cursor:pointer; font-size:14px; transition:all 0.2s; }
    .dropdown-toggle:hover { background:var(--bg); border-color:var(--gold); color:var(--gold); }
    .dropdown-menu { display:none; position:absolute; right:0; top:100%; background:white; min-width:185px; box-shadow:0 4px 20px rgba(0,0,0,0.12); border:1px solid var(--border); border-radius:8px; z-index:1000; margin-top:4px; overflow:hidden; }
    .dropdown-menu.show { display:block; animation:slideDown 0.18s ease; }
    @keyframes slideDown { from{opacity:0;transform:translateY(-6px)} to{opacity:1;transform:translateY(0)} }
    .dropdown-menu button { width:100%; padding:9px 14px; border:none; background:white; text-align:left; cursor:pointer; font-size:13px; color:var(--ink2); display:flex; align-items:center; gap:9px; transition:all 0.15s; font-weight:500; }
    .dropdown-menu button:hover { background:var(--bg); color:var(--gold); }
    .dropdown-menu button.danger:hover { background:var(--danger-light); color:var(--danger); }
    .dropdown-menu button i { width:15px; text-align:center; }
    .dropdown-menu hr { margin:0; border:none; border-top:1px solid var(--border); }

    /* ══════════ GRID VIEW ══════════ */
    .employee-grid { display:none; grid-template-columns:repeat(auto-fill,minmax(240px,1fr)); gap:16px; padding:20px; }
    .employee-grid.show { display:grid; }
    .emp-card { border:1px solid var(--border); border-radius:var(--radius); padding:20px; background:white; transition:all 0.2s ease; text-align:center; position:relative; }
    .emp-card:hover { border-color:var(--gold); box-shadow:0 4px 16px rgba(32,75,113,0.12); transform:translateY(-2px); }
    .emp-card .card-avatar { width:54px; height:54px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:19px; font-weight:700; color:white; margin:0 auto 10px; }
    .emp-card .card-name { font-size:14px; font-weight:700; color:var(--ink); margin-bottom:3px; }
    .emp-card .card-pos { font-size:12px; color:var(--ink3); margin-bottom:9px; }
    .emp-card .card-actions { display:flex; gap:7px; justify-content:center; margin-top:12px; }
    .card-badge-row { display:flex; gap:6px; justify-content:center; flex-wrap:wrap; margin-bottom:7px; }
    .card-btn { padding:6px 10px; border-radius:7px; border:1px solid var(--border); background:var(--bg); color:var(--ink2); cursor:pointer; font-size:12px; transition:all 0.15s; }
    .card-btn:hover { background:var(--gold); color:white; border-color:var(--gold); }
    .card-btn.del:hover { background:var(--danger); border-color:var(--danger); }

    /* ══════════ PAGINATION ══════════ */
    .pagination { display:flex; align-items:center; justify-content:space-between; gap:6px; padding:14px 20px; border-top:1px solid var(--border); flex-wrap:wrap; }
    .pagination-info { font-size:13px; color:var(--ink2); }
    .pagination-controls { display:flex; gap:6px; }
    .pagination button { padding:6px 14px; border-radius:7px; border:1px solid var(--border); background:var(--surface); color:var(--ink); font-size:13px; cursor:pointer; transition:background .12s; font-weight:600; }
    .pagination button:disabled { opacity:.4; cursor:default; }
    .pagination button.active, .pagination button:hover:not(:disabled) { background:var(--gold); color:#fff; border-color:var(--gold); }

    /* ══════════ EMPTY STATE ══════════ */
    .empty-state { text-align:center; padding:50px 20px; }
    .empty-state i { font-size:52px; color:var(--border); margin-bottom:14px; display:block; }
    .empty-state h3 { font-size:16px; color:var(--ink2); margin-bottom:6px; }
    .empty-state p { font-size:13px; color:var(--ink3); }

    /* ══════════ MODAL ══════════ */
    .modal { display:none; position:fixed; z-index:2000; left:0; top:0; width:100%; height:100%; background:rgba(0,0,0,0.5); backdrop-filter:blur(4px); animation:fadeIn 0.2s ease; }
    .modal.show { display:flex; align-items:center; justify-content:center; }
    @keyframes fadeIn { from{opacity:0} to{opacity:1} }
    .modal-content { background:white; border-radius:16px; width:90%; max-width:620px; max-height:90vh; overflow-y:auto; box-shadow:0 20px 60px rgba(0,0,0,0.25); animation:slideUp 0.3s ease; }
    .modal-content.wide { max-width:760px; }
    @keyframes slideUp { from{opacity:0;transform:translateY(20px)} to{opacity:1;transform:translateY(0)} }
    .modal-header { padding:22px 24px 16px; border-bottom:1px solid var(--border); display:flex; justify-content:space-between; align-items:center; position:sticky; top:0; background:white; z-index:10; }
    .modal-header h2 { font-size:18px; font-weight:700; color:var(--ink); display:flex; align-items:center; gap:9px; }
    .modal-close { background:transparent; border:none; font-size:18px; cursor:pointer; color:var(--ink3); width:30px; height:30px; display:flex; align-items:center; justify-content:center; border-radius:6px; transition:all 0.2s; }
    .modal-close:hover { background:var(--bg); color:var(--ink); }
    .modal-body { padding:22px 24px; }
    .modal-footer { padding:14px 24px; border-top:1px solid var(--border); display:flex; gap:8px; justify-content:flex-end; position:sticky; bottom:0; background:white; }
    .btn { padding:9px 16px; border:none; border-radius:8px; font-size:13px; font-weight:600; cursor:pointer; transition:all 0.2s; display:inline-flex; align-items:center; gap:7px; }
    .btn-primary { background:var(--gold); color:white; }
    .btn-primary:hover { opacity:.88; }
    .btn-secondary { background:var(--bg); color:var(--ink2); border:1px solid var(--border); }
    .btn-secondary:hover { background:var(--border); }
    .btn-danger-solid { background:var(--danger); color:white; }
    .btn-danger-solid:hover { opacity:.88; }
    .btn-sm { padding:6px 11px; font-size:12px; }

    .form-grid { display:grid; grid-template-columns:1fr 1fr; gap:14px; }
    .form-group { display:flex; flex-direction:column; gap:5px; }
    .form-group.span2 { grid-column:span 2; }
    .form-group label { font-size:11px; font-weight:700; color:var(--ink2); text-transform:uppercase; letter-spacing:0.3px; }
    .form-control { padding:9px 11px; border:1px solid var(--border); border-radius:8px; font-size:13px; color:var(--ink); background:white; transition:all 0.2s; font-family:inherit; }
    .form-control:focus { outline:none; border-color:var(--gold); box-shadow:0 0 0 3px rgba(32,75,113,0.1); }
    .form-section-title { font-size:12px; font-weight:700; color:var(--gold); text-transform:uppercase; letter-spacing:0.5px; padding-bottom:7px; border-bottom:2px solid var(--bg); margin-bottom:2px; grid-column:span 2; margin-top:8px; }

    .profile-banner { background:linear-gradient(135deg, var(--navy-primary), var(--navy-darker)); border-radius:10px; padding:22px; color:white; display:flex; align-items:center; gap:18px; margin-bottom:18px; }
    .profile-avatar-lg { width:68px; height:68px; border-radius:50%; border:3px solid rgba(255,255,255,0.3); display:flex; align-items:center; justify-content:center; font-size:24px; font-weight:700; flex-shrink:0; }
    .profile-info h3 { font-size:19px; font-weight:700; margin-bottom:3px; }
    .profile-info p { font-size:13px; opacity:0.8; }
    .profile-badges { display:flex; gap:7px; margin-top:7px; flex-wrap:wrap; }
    .profile-badge { background:rgba(255,255,255,0.15); padding:3px 9px; border-radius:20px; font-size:11px; font-weight:600; backdrop-filter:blur(4px); }
    .detail-grid { display:grid; grid-template-columns:1fr 1fr; gap:10px; }
    .detail-item { background:var(--bg); border-radius:8px; padding:11px; }
    .detail-label { font-size:11px; font-weight:600; color:var(--ink3); text-transform:uppercase; letter-spacing:0.3px; margin-bottom:3px; }
    .detail-value { font-size:13px; color:var(--ink); font-weight:600; }

    .confirm-icon { font-size:44px; text-align:center; margin-bottom:14px; }
    .confirm-message { text-align:center; font-size:14px; color:var(--ink2); line-height:1.6; }
    .confirm-name { font-weight:700; color:var(--ink); }

    .notification { position:fixed; top:76px; right:20px; background:white; border:1px solid var(--border); border-left:4px solid var(--success); padding:14px 18px; border-radius:8px; box-shadow:0 4px 20px rgba(0,0,0,0.12); z-index:3000; animation:slideInRight 0.3s ease; max-width:320px; }
    .notification.error { border-left-color:var(--danger); }
    .notification.warning { border-left-color:var(--warning); }
    @keyframes slideInRight { from{opacity:0;transform:translateX(80px)} to{opacity:1;transform:translateX(0)} }
    .notif-content { display:flex; align-items:flex-start; gap:10px; }
    .notif-icon { font-size:18px; }
    .notif-icon.success { color:var(--success); }
    .notif-icon.error { color:var(--danger); }
    .notif-icon.warning { color:var(--warning); }
    .notif-title { font-weight:700; font-size:13px; color:var(--ink); margin-bottom:1px; }
    .notif-text { font-size:12px; color:var(--ink2); }
  </style>
</head>
<body>
<div class="dashboard">

<!-- ════════════════ SIDEBAR ════════════════ -->
<aside class="sidebar" id="sidebar">
  <div class="brand">
    <i class="fa-solid fa-circle-nodes"></i> Promee International
  </div>
  <ul class="menu">
    <li><a href="index.html"><i class="fa-solid fa-gauge"></i> Dashboard</a></li>
    <li class="has-submenu">
      <a href="#"><i class="fa-solid fa-user"></i> Client <i class="fa-solid fa-caret-right" style="float:right;font-size:10px;margin-top:5px"></i></a>
      <ul class="submenu">
        <li><a href="new_request.html"><i class="fa-regular fa-circle"></i> New Request</a></li>
        <li><a href="add_new_client.html"><i class="fa-regular fa-circle"></i> Add New</a></li>
        <li><a href="client_list.html"><i class="fa-regular fa-circle"></i> Client List</a></li>
        <li><a href="left_client.html"><i class="fa-regular fa-circle"></i> Left Client</a></li>
        <li><a href="scheduler.html"><i class="fa-regular fa-circle"></i> Scheduler</a></li>
        <li><a href="change_request.html"><i class="fa-regular fa-circle"></i> Change Request</a></li>
        <li><a href="portal_manage.html"><i class="fa-regular fa-circle"></i> Portal Manage</a></li>
      </ul>
    </li>
    <li class="has-submenu">
      <a href="#"><i class="fa-solid fa-file-invoice-dollar"></i> Billing <i class="fa-solid fa-caret-right" style="float:right;font-size:10px;margin-top:5px"></i></a>
      <ul class="submenu">
        <li><a href="billing.html"><i class="fa-regular fa-circle"></i> Billing</a></li>
      </ul>
    </li>
    <li class="has-submenu">
      <a href="#"><i class="fa-solid fa-server"></i> Mikrotik Server <i class="fa-solid fa-caret-right" style="float:right;font-size:10px;margin-top:5px"></i></a>
      <ul class="submenu">
        <li><a href="Bulk_Client_Import.html"><i class="fa-regular fa-circle"></i> Bulk Client Import</a></li>
      </ul>
    </li>
    <li class="has-submenu open">
      <a href="#"><i class="fa-solid fa-users-gear"></i> HR &amp; Payroll <i class="fa-solid fa-caret-right" style="float:right;font-size:10px;margin-top:5px"></i></a>
      <ul class="submenu">
        <li><a href="employee_list.html" class="active"><i class="fa-regular fa-circle"></i> Employee List</a></li>
        <li><a href="add_employee.html"><i class="fa-regular fa-circle"></i> Add Employee</a></li>
        <li><a href="attendance.html"><i class="fa-regular fa-circle"></i> Attendance</a></li>
        <li><a href="salary_sheet.html"><i class="fa-regular fa-circle"></i> Salary Sheet</a></li>
        <li><a href="department.html"><i class="fa-regular fa-circle"></i> Department</a></li>
        <li><a href="position.html"><i class="fa-regular fa-circle"></i> Position</a></li>
        <li><a href="payhead.html"><i class="fa-regular fa-circle"></i> Payhead</a></li>
        <li><a href="payroll.html"><i class="fa-regular fa-circle"></i> Payroll</a></li>
        <li><a href="payslip.html"><i class="fa-regular fa-circle"></i> Payslip</a></li>
        <li><a href="resign_rule.html"><i class="fa-regular fa-circle"></i> Resign Rule</a></li>
        <li><a href="resignation.html"><i class="fa-regular fa-circle"></i> Resignation</a></li>
        <li><a href="rejoin.html"><i class="fa-regular fa-circle"></i> Rejoin</a></li>
      </ul>
    </li>
    <li class="has-submenu">
      <a href="#"><i class="fa-solid fa-door-open"></i> Leave Management <i class="fa-solid fa-caret-right" style="float:right;font-size:10px;margin-top:5px"></i></a>
      <ul class="submenu">
        <li><a href="leave_management.html"><i class="fa-regular fa-circle"></i> Leave Management</a></li>
      </ul>
    </li>
    <li class="has-submenu">
      <a href="#"><i class="fa-solid fa-calendar-days"></i> Events &amp; Holidays <i class="fa-solid fa-caret-right" style="float:right;font-size:10px;margin-top:5px"></i></a>
      <ul class="submenu">
        <li><a href="events_holidays.html"><i class="fa-regular fa-circle"></i> Events &amp; Holidays</a></li>
      </ul>
    </li>
    <li class="has-submenu">
      <a href="#"><i class="fa-solid fa-headset"></i> Support &amp; Ticketing <i class="fa-solid fa-caret-right" style="float:right;font-size:10px;margin-top:5px"></i></a>
      <ul class="submenu">
        <li><a href="ticket_list.html"><i class="fa-regular fa-circle"></i> Ticket List</a></li>
        <li><a href="new_ticket.html"><i class="fa-regular fa-circle"></i> New Ticket</a></li>
        <li><a href="complain_list.html"><i class="fa-regular fa-circle"></i> Complain List</a></li>
        <li><a href="complain_category.html"><i class="fa-regular fa-circle"></i> Complain Category</a></li>
        <li><a href="support_team.html"><i class="fa-regular fa-circle"></i> Support Team</a></li>
        <li><a href="ticket_reports.html"><i class="fa-regular fa-circle"></i> Ticket Reports</a></li>
        <li><a href="service_history.html"><i class="fa-regular fa-circle"></i> Service History</a></li>
      </ul>
    </li>
      <!-- Task Management: single direct link, NO dropdown submenu -->
      <li class="has-submenu">
          <a href="#"><i class="fa-solid fa-list-check"></i> Task Management
            <i class="fa-solid fa-caret-right" style="float: right; font-size: 10px; margin-top: 5px"></i>
        </a>
          <ul class="submenu">
            <li><a href="task_management.html"><i class="fa-regular fa-circle"></i> Task List</a></li>
          </ul>
      </li>
      <li class="has-submenu">
        <a href="#"><i class="fa-solid fa-basket-shopping"></i> Purchase <i class="fa-solid fa-caret-right" style="float:right;font-size:10px;margin-top:5px"></i></a>
        <ul class="submenu">
          <li><a href="purchase.html"><i class="fa-regular fa-circle"></i> Purchase Orders</a></li>
          <!-- <li><a href="vendor_list.html"><i class="fa-regular fa-circle"></i> Vendor List</a></li>
          <li><a href="purchase_report.html"><i class="fa-regular fa-circle"></i> Purchase Report</a></li> -->
        </ul>
      </li>
    <li class="has-submenu">
        <a href="#"><i class="fa-solid fa-boxes-stacked"></i> Inventory <i class="fa-solid fa-caret-right" style="float:right;font-size:10px;margin-top:5px"></i></a>
        <ul class="submenu">
          <li><a href="inventory.html"><i class="fa-regular fa-circle"></i> Inventory</a></li>
          <li><a href="stock_in.html"><i class="fa-regular fa-circle"></i> Stock In</a></li>
          <li><a href="stock_out.html"><i class="fa-regular fa-circle"></i> Stock Out</a></li>
          <li><a href="suppliers.html"><i class="fa-regular fa-circle"></i> Suppliers</a></li>
      </ul>
      </li>
      <li class="has-submenu">
        <a href="#"><i class="fa-solid fa-laptop-medical"></i> Assets <i class="fa-solid fa-caret-right" style="float:right;font-size:10px;margin-top:5px"></i></a>
        <ul class="submenu">
          <li><a href="assets.html" class="active"><i class="fa-regular fa-circle"></i> Asset List</a></li>
          <li><a href="asset_assign.html"><i class="fa-regular fa-circle"></i> Assign Asset</a></li>
          <li><a href="asset_maintenance.html"><i class="fa-regular fa-circle"></i> Maintenance</a></li>
      </ul>
      <li class="has-submenu">
        <a href="#"><i class="fa-solid fa-money-bill-trend-up"></i> Income <i class="fa-solid fa-caret-right" style="float:right;font-size:10px;margin-top:5px"></i></a>
        <ul class="submenu">
          <li><a href="income.html"><i class="fa-regular fa-circle"></i> Income Overview</a></li>
          <li><a href="income_entry.html"><i class="fa-regular fa-circle"></i> Income Entry</a></li>
          <li><a href="income_report.html"><i class="fa-regular fa-circle"></i> Reports</a></li>
      </ul>
      </li>
  </ul>
</aside>

<!-- ════════════════ MAIN ════════════════ -->
<div class="main-content">

  <!-- ══ HEADER — updated: Home + Log Out buttons added (matches position.html / resignation.html) ══ -->
  <header>
    <div class="header-left">
      <div class="sidebar-toggle" id="sidebarToggle"><i class="fa-solid fa-bars"></i></div>
      <div class="search-box">
        <input type="text" id="globalSearch" placeholder="Search Customer" />
        <i class="fa-solid fa-magnifying-glass"></i>
      </div>
    </div>
    <div class="header-right">
      <div><i class="fa-solid fa-desktop"></i> Online Client Monitoring</div>
      <div><i class="fa-solid fa-wrench"></i> Releases<span class="h-badge">0</span></div>
      <div><i class="fa-solid fa-bell"></i><span class="h-badge">0</span></div>
      <a href="login.html" class="header-btn"><i class="fa-solid fa-house"></i> Home</a>
      <a href="login.html" class="header-btn"><i class="fa-solid fa-right-from-bracket"></i> Log Out</a>
      <div><i class="fa-solid fa-user-circle"></i></div>
    </div>
  </header>

  <!-- Page Header -->
  <div class="page-header">
    <div class="page-header-left">
      <h1><i class="fa-solid fa-users-gear"></i> Employee Management</h1>
      <p>Manage employee records, departments, positions, and HR operations</p>
    </div>
  </div>

  <!-- PAGE CONTENT -->
  <div class="page-content">

    <!-- STAT CARDS ROW 1 -->
    <div class="stats-row stats-row-1">
      <div class="stat-card">
        <div class="stat-icon-wrap"><i class="fa-solid fa-users fa-lg"></i></div>
        <div class="stat-info">
          <div class="stat-label">Total Employees</div>
          <div class="stat-value" id="s1Total">0</div>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon-wrap"><i class="fa-solid fa-calendar-minus fa-lg"></i></div>
        <div class="stat-info">
          <div class="stat-label">On Leave Today</div>
          <div class="stat-value" id="s1Leave">0</div>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon-wrap"><i class="fa-solid fa-user-plus fa-lg"></i></div>
        <div class="stat-info">
          <div class="stat-label">Active Employees</div>
          <div class="stat-value" id="s1Active">0</div>
          <div class="stat-sub">Probation: <span id="s1Probation">0</span></div>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon-wrap"><i class="fa-solid fa-bangladeshi-taka-sign fa-lg"></i></div>
        <div class="stat-info">
          <div class="stat-label">Total Monthly Payroll</div>
          <div class="stat-value" id="s1Payroll">৳0</div>
          <div class="stat-sub">Avg: <span id="s1Avg">৳0</span></div>
        </div>
      </div>
    </div>

    <!-- STAT CARDS ROW 2 -->
    <div class="stats-row stats-row-2">
      <div class="stat-card">
        <div class="stat-icon-wrap"><i class="fa-solid fa-desktop fa-lg"></i></div>
        <div class="stat-info"><div class="stat-label">Technology</div><div class="stat-value" id="d1">0</div></div>
      </div>
      <div class="stat-card">
        <div class="stat-icon-wrap"><i class="fa-solid fa-people-group fa-lg"></i></div>
        <div class="stat-info"><div class="stat-label">HR Department</div><div class="stat-value" id="d2">0</div></div>
      </div>
      <div class="stat-card">
        <div class="stat-icon-wrap"><i class="fa-solid fa-chart-line fa-lg"></i></div>
        <div class="stat-info"><div class="stat-label">Sales Department</div><div class="stat-value" id="d3">0</div></div>
      </div>
      <div class="stat-card">
        <div class="stat-icon-wrap"><i class="fa-solid fa-building fa-lg"></i></div>
        <div class="stat-info"><div class="stat-label">Other Departments</div><div class="stat-value" id="d4">0</div></div>
      </div>
    </div>

    <!-- HR SUMMARY BANNER -->
    <div class="hr-summary">
      <div class="summary-header">
        <div class="summary-title">
          <h2><i class="fa-solid fa-building-user"></i> Workforce Overview</h2>
          <p>Human Resources &amp; Payroll Management</p>
        </div>
        <button class="add-emp-btn" onclick="openAddModal()"><i class="fa-solid fa-user-plus"></i> Add Employee</button>
      </div>
      <div class="summary-details">
        <div class="summary-item"><h4>Total Employees</h4><p id="bTotal">0</p></div>
        <div class="summary-item">
          <h4>Active / Inactive</h4>
          <p id="bActInact">0 / 0</p>
          <div class="dept-bar"><div class="dept-fill" id="bActiveBar" style="width:0%"></div></div>
        </div>
        <div class="summary-item"><h4>Monthly Payroll</h4><p id="bPayroll">৳0</p></div>
        <div class="summary-item"><h4>Departments</h4><p id="bDepts">0</p></div>
        <div class="summary-item"><h4>On Leave Today</h4><p id="bLeave">0</p></div>
      </div>
    </div>

    <!-- QUICK ACTIONS -->
    <div class="quick-actions">
      <div class="quick-actions-title">Quick Actions</div>
      <div class="quick-actions-grid">
        <button class="quick-action-btn" onclick="openAddModal()"><i class="fa-solid fa-user-plus"></i> Add Employee</button>
        <button class="quick-action-btn" onclick="exportToExcel()"><i class="fa-solid fa-file-excel"></i> Export Excel</button>
        <button class="quick-action-btn"><i class="fa-solid fa-file-pdf"></i> HR Report</button>
        <button class="quick-action-btn" onclick="window.location.href='attendance.html'"><i class="fa-solid fa-fingerprint"></i> Attendance</button>
        <button class="quick-action-btn" onclick="window.location.href='payroll.html'"><i class="fa-solid fa-money-check-dollar"></i> Run Payroll</button>
        <button class="quick-action-btn" onclick="window.location.href='salary_sheet.html'"><i class="fa-solid fa-file-invoice-dollar"></i> Salary Sheet</button>
      </div>
    </div>

    <!-- FILTER BOX -->
    <div class="filter-box">
      <h3><i class="fa-solid fa-filter"></i> Filter Options</h3>
      <div class="filter-row">
        <div class="filter-group">
          <label>Status</label>
          <select id="statusFilter">
            <option value="all">All Status</option>
            <option value="Active">Active</option>
            <option value="Inactive">Inactive</option>
            <option value="Probation">Probation</option>
            <option value="On Leave">On Leave</option>
          </select>
        </div>
        <div class="filter-group">
          <label>Department</label>
          <select id="deptFilter">
            <option value="all">All Departments</option>
            <option value="Technology">Technology</option>
            <option value="HR">Human Resources</option>
            <option value="Finance">Finance</option>
            <option value="Support">Support</option>
            <option value="Sales">Sales</option>
            <option value="Admin">Administration</option>
            <option value="Operations">Operations</option>
          </select>
        </div>
        <div class="filter-group">
          <label>Position</label>
          <select id="posFilter">
            <option value="all">All Positions</option>
            <option value="Manager">Manager</option>
            <option value="Engineer">Engineer</option>
            <option value="Executive">Executive</option>
            <option value="Officer">Officer</option>
            <option value="Technician">Technician</option>
          </select>
        </div>
        <div class="filter-group">
          <label>Gender</label>
          <select id="genderFilter">
            <option value="all">All Genders</option>
            <option value="Male">Male</option>
            <option value="Female">Female</option>
          </select>
        </div>
        <div class="filter-group">
          <label>Search</label>
          <input type="text" id="searchInput" placeholder="Name, ID, phone, email…">
        </div>
        <button class="btn-apply" onclick="applyFilters()"><i class="fa-solid fa-magnifying-glass"></i> Apply</button>
        <button class="btn-reset" onclick="clearFilters()"><i class="fa-solid fa-rotate-right"></i> Reset</button>
      </div>
    </div>

    <!-- TABLE BOX -->
    <div class="table-box">
      <div class="table-topbar">
        <h3>
          <i class="fa-solid fa-table"></i>
          Employee List
          <span class="record-count" id="recordCount">0 records</span>
        </h3>
        <div class="table-top-right">
          <div class="view-toggle">
            <button class="view-btn active" id="tableViewBtn" onclick="switchView('table')" title="Table View"><i class="fa-solid fa-table"></i></button>
            <button class="view-btn" id="gridViewBtn" onclick="switchView('grid')" title="Grid View"><i class="fa-solid fa-grip"></i></button>
          </div>
          <button class="btn-add" onclick="openAddModal()"><i class="fa-solid fa-plus"></i> Add Employee</button>
          <button class="btn-export" onclick="exportToExcel()"><i class="fa-solid fa-download"></i> Export</button>
        </div>
      </div>

      <div class="bulk-actions-bar" id="bulkActionsBar">
        <span class="selected-count" id="selectedCount">0 selected</span>
        <div class="bulk-btns">
          <button class="bulk-btn" onclick="bulkStatusChange('Active')"><i class="fa-solid fa-check"></i> Set Active</button>
          <button class="bulk-btn" onclick="bulkStatusChange('Inactive')"><i class="fa-solid fa-ban"></i> Set Inactive</button>
          <button class="bulk-btn del-btn" onclick="clearSelection()"><i class="fa-solid fa-times"></i> Cancel</button>
        </div>
      </div>

      <div id="tableView" style="overflow-x:auto;">
        <table>
          <thead>
            <tr>
              <th style="width:40px;"><input type="checkbox" class="checkbox" id="selectAll" onchange="toggleSelectAll()"></th>
              <th>Employee</th>
              <th>ID</th>
              <th>Department</th>
              <th>Position</th>
              <th>Phone</th>
              <th>Join Date</th>
              <th>Total Salary</th>
              <th>Status</th>
              <th style="text-align:center;">Actions</th>
            </tr>
          </thead>
          <tbody id="employeeBody"></tbody>
        </table>
      </div>

      <div id="gridView" class="employee-grid"></div>

      <div class="pagination">
        <div class="pagination-info" id="paginationInfo">Showing 0 of 0 records</div>
        <div class="pagination-controls">
          <button onclick="previousPage()" id="prevBtn"><i class="fa-solid fa-chevron-left"></i> Previous</button>
          <button onclick="nextPage()" id="nextBtn">Next <i class="fa-solid fa-chevron-right"></i></button>
        </div>
      </div>
    </div>

  </div><!-- /page-content -->
</div><!-- /main-content -->
</div><!-- /dashboard -->

<!-- VIEW MODAL -->
<div id="viewModal" class="modal">
  <div class="modal-content wide">
    <div class="modal-header">
      <h2><i class="fa-solid fa-id-card"></i> Employee Profile</h2>
      <button class="modal-close" onclick="closeViewModal()"><i class="fa-solid fa-times"></i></button>
    </div>
    <div class="modal-body" id="viewContent"></div>
    <div class="modal-footer">
      <button class="btn btn-secondary" onclick="closeViewModal()">Close</button>
      <button class="btn btn-primary" id="editFromView"><i class="fa-solid fa-edit"></i> Edit Employee</button>
    </div>
  </div>
</div>

<!-- ADD/EDIT MODAL -->
<div id="empModal" class="modal">
  <div class="modal-content wide">
    <div class="modal-header">
      <h2 id="empModalTitle"><i class="fa-solid fa-user-plus"></i> Add New Employee</h2>
      <button class="modal-close" onclick="closeEmpModal()"><i class="fa-solid fa-times"></i></button>
    </div>
    <div class="modal-body">
      <div class="form-grid">
        <div class="form-section-title"><i class="fa-solid fa-user"></i> Personal Information</div>
        <div class="form-group"><label>First Name *</label><input type="text" class="form-control" id="f_firstName" placeholder="First name"></div>
        <div class="form-group"><label>Last Name *</label><input type="text" class="form-control" id="f_lastName" placeholder="Last name"></div>
        <div class="form-group"><label>Date of Birth</label><input type="date" class="form-control" id="f_dob"></div>
        <div class="form-group"><label>Gender</label>
          <select class="form-control" id="f_gender"><option value="">Select</option><option>Male</option><option>Female</option><option>Other</option></select>
        </div>
        <div class="form-group"><label>NID / Passport</label><input type="text" class="form-control" id="f_nid" placeholder="National ID"></div>
        <div class="form-group"><label>Blood Group</label>
          <select class="form-control" id="f_blood"><option value="">Select</option><option>A+</option><option>A-</option><option>B+</option><option>B-</option><option>O+</option><option>O-</option><option>AB+</option><option>AB-</option></select>
        </div>
        <div class="form-section-title"><i class="fa-solid fa-address-card"></i> Contact Information</div>
        <div class="form-group"><label>Email *</label><input type="email" class="form-control" id="f_email" placeholder="email@company.com"></div>
        <div class="form-group"><label>Phone *</label><input type="tel" class="form-control" id="f_phone" placeholder="01XXXXXXXXX"></div>
        <div class="form-group span2"><label>Present Address</label><input type="text" class="form-control" id="f_address" placeholder="Present address"></div>
        <div class="form-group span2"><label>Permanent Address</label><input type="text" class="form-control" id="f_permanentAddress" placeholder="Permanent address"></div>
        <div class="form-group"><label>Emergency Contact Name</label><input type="text" class="form-control" id="f_emergencyName" placeholder="Name"></div>
        <div class="form-group"><label>Emergency Contact Phone</label><input type="tel" class="form-control" id="f_emergencyPhone" placeholder="01XXXXXXXXX"></div>
        <div class="form-section-title"><i class="fa-solid fa-briefcase"></i> Employment Details</div>
        <div class="form-group"><label>Department *</label>
          <select class="form-control" id="f_dept"><option value="">Select</option><option value="Technology">Technology</option><option value="HR">Human Resources</option><option value="Finance">Finance</option><option value="Support">Support</option><option value="Sales">Sales</option><option value="Admin">Administration</option><option value="Operations">Operations</option></select>
        </div>
        <div class="form-group"><label>Position *</label>
          <select class="form-control" id="f_position"><option value="">Select</option><option>Manager</option><option>Senior Engineer</option><option>Engineer</option><option>Executive</option><option>Officer</option><option>Technician</option><option>Intern</option></select>
        </div>
        <div class="form-group"><label>Employee Type</label>
          <select class="form-control" id="f_empType"><option>Full-time</option><option>Part-time</option><option>Contractual</option><option>Intern</option></select>
        </div>
        <div class="form-group"><label>Joining Date *</label><input type="date" class="form-control" id="f_joinDate"></div>
        <div class="form-group"><label>Status</label>
          <select class="form-control" id="f_status"><option>Active</option><option>Probation</option><option>On Leave</option><option>Inactive</option></select>
        </div>
        <div class="form-group"><label>Reporting Manager</label><input type="text" class="form-control" id="f_manager" placeholder="Manager name"></div>
        <div class="form-section-title"><i class="fa-solid fa-bangladeshi-taka-sign"></i> Salary &amp; Benefits</div>
        <div class="form-group"><label>Basic Salary (BDT) *</label><input type="number" class="form-control" id="f_salary" placeholder="0.00" min="0"></div>
        <div class="form-group"><label>House Allowance</label><input type="number" class="form-control" id="f_houseAllowance" placeholder="0.00" min="0"></div>
        <div class="form-group"><label>Medical Allowance</label><input type="number" class="form-control" id="f_medicalAllowance" placeholder="0.00" min="0"></div>
        <div class="form-group"><label>Transport Allowance</label><input type="number" class="form-control" id="f_transportAllowance" placeholder="0.00" min="0"></div>
        <div class="form-group"><label>Bank Name</label><input type="text" class="form-control" id="f_bankName" placeholder="Bank name"></div>
        <div class="form-group"><label>Bank Account No</label><input type="text" class="form-control" id="f_bankAccount" placeholder="Account number"></div>
        <div class="form-section-title"><i class="fa-solid fa-graduation-cap"></i> Education &amp; Experience</div>
        <div class="form-group"><label>Highest Qualification</label>
          <select class="form-control" id="f_education"><option value="">Select</option><option>SSC</option><option>HSC</option><option>Diploma</option><option>Bachelor's</option><option>Master's</option><option>PhD</option></select>
        </div>
        <div class="form-group"><label>Years of Experience</label><input type="number" class="form-control" id="f_experience" placeholder="0" min="0"></div>
        <div class="form-group span2"><label>Skills / Expertise</label><input type="text" class="form-control" id="f_skills" placeholder="e.g. Network Admin, Linux, MikroTik"></div>
        <div class="form-group span2"><label>Notes / Remarks</label><textarea class="form-control" id="f_notes" rows="3" placeholder="Additional notes…"></textarea></div>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-secondary" onclick="closeEmpModal()">Cancel</button>
      <button class="btn btn-primary" onclick="saveEmployee()"><i class="fa-solid fa-save"></i> Save Employee</button>
    </div>
  </div>
</div>

<!-- DELETE MODAL -->
<div id="deleteModal" class="modal">
  <div class="modal-content" style="max-width:420px;">
    <div class="modal-header">
      <h2><i class="fa-solid fa-triangle-exclamation" style="color:var(--danger)"></i> Confirm Delete</h2>
      <button class="modal-close" onclick="closeDeleteModal()"><i class="fa-solid fa-times"></i></button>
    </div>
    <div class="modal-body">
      <div class="confirm-icon">🗑️</div>
      <p class="confirm-message" id="deleteMessage">Are you sure?</p>
    </div>
    <div class="modal-footer">
      <button class="btn btn-secondary" onclick="closeDeleteModal()">Cancel</button>
      <button class="btn btn-danger-solid" onclick="confirmDelete()"><i class="fa-solid fa-trash"></i> Delete</button>
    </div>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
<script>
let employeeData = [
  { id:"EMP001",firstName:"Rakibul",lastName:"Hasan",gender:"Male",dob:"1990-05-14",nid:"1990145678",blood:"B+",email:"rakibul@promee.com",phone:"01711234567",address:"12/A Mirpur-10, Dhaka",permanentAddress:"Comilla Sadar",emergencyName:"Salim Hasan",emergencyPhone:"01811234567",dept:"Technology",position:"Senior Engineer",empType:"Full-time",joinDate:"2019-03-01",status:"Active",manager:"Asif Mahmud",salary:55000,houseAllowance:10000,medicalAllowance:3000,transportAllowance:2000,bankName:"Dutch Bangla Bank",bankAccount:"1234567890",education:"Bachelor's",experience:6,skills:"Network Admin, MikroTik, Linux",notes:"Excellent performer"},
  { id:"EMP002",firstName:"Nasrin",lastName:"Akter",gender:"Female",dob:"1993-08-22",nid:"1993887654",blood:"A+",email:"nasrin@promee.com",phone:"01821345678",address:"45 Mohammadpur, Dhaka",permanentAddress:"Noakhali Sadar",emergencyName:"Karim Akter",emergencyPhone:"01921345678",dept:"HR",position:"Manager",empType:"Full-time",joinDate:"2018-06-15",status:"Active",manager:"CEO",salary:65000,houseAllowance:15000,medicalAllowance:4000,transportAllowance:3000,bankName:"BRAC Bank",bankAccount:"9876543210",education:"Master's",experience:8,skills:"HR Management, Recruitment, Payroll",notes:"Senior HR Manager"},
  { id:"EMP003",firstName:"Tanvir",lastName:"Ahmed",gender:"Male",dob:"1995-11-03",nid:"1995221144",blood:"O+",email:"tanvir@promee.com",phone:"01631456789",address:"78 Uttara Sec-6, Dhaka",permanentAddress:"Sylhet Sadar",emergencyName:"Jobayer Ahmed",emergencyPhone:"01531456789",dept:"Support",position:"Technician",empType:"Full-time",joinDate:"2021-01-20",status:"Probation",manager:"Rakibul Hasan",salary:28000,houseAllowance:5000,medicalAllowance:2000,transportAllowance:1500,bankName:"Islami Bank",bankAccount:"5544332211",education:"Diploma",experience:2,skills:"MikroTik, Fiber Optic, Cable",notes:"On 6-month probation"},
  { id:"EMP004",firstName:"Shahnaz",lastName:"Begum",gender:"Female",dob:"1988-02-17",nid:"1988556677",blood:"AB+",email:"shahnaz@promee.com",phone:"01941567890",address:"23 Banani, Dhaka",permanentAddress:"Mymensingh Sadar",emergencyName:"Rashed Begum",emergencyPhone:"01841567890",dept:"Finance",position:"Manager",empType:"Full-time",joinDate:"2016-09-01",status:"Active",manager:"CEO",salary:70000,houseAllowance:18000,medicalAllowance:5000,transportAllowance:4000,bankName:"City Bank",bankAccount:"1122334455",education:"Master's",experience:12,skills:"Accounting, Financial Analysis, Tax",notes:"Finance head, CPA certified"},
  { id:"EMP005",firstName:"Mahmudul",lastName:"Islam",gender:"Male",dob:"1997-06-09",nid:"1997334455",blood:"B-",email:"mahmudul@promee.com",phone:"01751678901",address:"56 Dhanmondi, Dhaka",permanentAddress:"Rajshahi Sadar",emergencyName:"Kamal Islam",emergencyPhone:"01651678901",dept:"Sales",position:"Executive",empType:"Full-time",joinDate:"2022-04-10",status:"Active",manager:"Nasrin Akter",salary:32000,houseAllowance:6000,medicalAllowance:2000,transportAllowance:2000,bankName:"Trust Bank",bankAccount:"6677889900",education:"Bachelor's",experience:3,skills:"Sales, CRM, Customer Relations",notes:"Top performer Q4 2025"},
  { id:"EMP006",firstName:"Fariha",lastName:"Noor",gender:"Female",dob:"1994-12-30",nid:"1994112233",blood:"A-",email:"fariha@promee.com",phone:"01861789012",address:"90 Gulshan-2, Dhaka",permanentAddress:"Chittagong Sadar",emergencyName:"Nazrul Noor",emergencyPhone:"01961789012",dept:"Admin",position:"Officer",empType:"Full-time",joinDate:"2020-07-05",status:"On Leave",manager:"Nasrin Akter",salary:38000,houseAllowance:7000,medicalAllowance:2500,transportAllowance:2000,bankName:"Prime Bank",bankAccount:"3344556677",education:"Bachelor's",experience:5,skills:"Administration, MS Office",notes:"On maternity leave"},
  { id:"EMP007",firstName:"Imran",lastName:"Khan",gender:"Male",dob:"1992-09-25",nid:"1992778899",blood:"O-",email:"imran@promee.com",phone:"01711890123",address:"34 Rayer Bazar, Dhaka",permanentAddress:"Khulna Sadar",emergencyName:"Akhtar Khan",emergencyPhone:"01811890123",dept:"Technology",position:"Engineer",empType:"Full-time",joinDate:"2020-11-15",status:"Active",manager:"Rakibul Hasan",salary:45000,houseAllowance:9000,medicalAllowance:3000,transportAllowance:2000,bankName:"Southeast Bank",bankAccount:"8899001122",education:"Bachelor's",experience:5,skills:"Cisco, BGP, OSPF, Linux",notes:"Network specialist"},
  { id:"EMP008",firstName:"Sadia",lastName:"Rahman",gender:"Female",dob:"1999-04-11",nid:"1999445566",blood:"B+",email:"sadia@promee.com",phone:"01921901234",address:"67 Badda, Dhaka",permanentAddress:"Barisal Sadar",emergencyName:"Habibur Rahman",emergencyPhone:"01821901234",dept:"Support",position:"Executive",empType:"Full-time",joinDate:"2023-02-01",status:"Probation",manager:"Tanvir Ahmed",salary:22000,houseAllowance:4000,medicalAllowance:1500,transportAllowance:1000,bankName:"Dutch Bangla Bank",bankAccount:"2233445566",education:"HSC",experience:1,skills:"Customer Support, Ticketing",notes:"First year employee"},
  { id:"EMP009",firstName:"Rezaul",lastName:"Karim",gender:"Male",dob:"1985-01-18",nid:"1985667788",blood:"A+",email:"rezaul@promee.com",phone:"01631012345",address:"89 Lalbagh, Dhaka",permanentAddress:"Dinajpur Sadar",emergencyName:"Jamir Karim",emergencyPhone:"01531012345",dept:"Operations",position:"Manager",empType:"Full-time",joinDate:"2015-05-20",status:"Active",manager:"CEO",salary:72000,houseAllowance:18000,medicalAllowance:5000,transportAllowance:4000,bankName:"BRAC Bank",bankAccount:"9900112233",education:"Master's",experience:15,skills:"Operations, ISO, Project Management",notes:"Senior manager"},
  { id:"EMP010",firstName:"Lamia",lastName:"Sultana",gender:"Female",dob:"2000-07-04",nid:"2000223344",blood:"O+",email:"lamia@promee.com",phone:"01741123456",address:"12 Shyamoli, Dhaka",permanentAddress:"Gazipur Sadar",emergencyName:"Salam Sultana",emergencyPhone:"01641123456",dept:"Sales",position:"Executive",empType:"Full-time",joinDate:"2023-08-14",status:"Active",manager:"Mahmudul Islam",salary:25000,houseAllowance:4500,medicalAllowance:1500,transportAllowance:1500,bankName:"Sonali Bank",bankAccount:"5566778899",education:"Bachelor's",experience:1,skills:"Sales, Social Media, Lead Generation",notes:"Young and dynamic"},
  { id:"EMP011",firstName:"Asif",lastName:"Mahmud",gender:"Male",dob:"1991-03-29",nid:"1991998877",blood:"AB-",email:"asif@promee.com",phone:"01851234560",address:"34 Tejgaon, Dhaka",permanentAddress:"Faridpur Sadar",emergencyName:"Emon Mahmud",emergencyPhone:"01951234560",dept:"Technology",position:"Manager",empType:"Full-time",joinDate:"2017-10-01",status:"Active",manager:"CEO",salary:80000,houseAllowance:20000,medicalAllowance:6000,transportAllowance:5000,bankName:"HSBC",bankAccount:"1122113344",education:"Master's",experience:10,skills:"DevOps, Cloud, AWS, Docker",notes:"Head of Technology"},
  { id:"EMP012",firstName:"Moriam",lastName:"Khatun",gender:"Female",dob:"1996-10-15",nid:"1996554433",blood:"B+",email:"moriam@promee.com",phone:"01961345671",address:"56 Khilgaon, Dhaka",permanentAddress:"Tangail Sadar",emergencyName:"Shahed Khatun",emergencyPhone:"01861345671",dept:"Finance",position:"Officer",empType:"Full-time",joinDate:"2021-06-20",status:"Inactive",manager:"Shahnaz Begum",salary:35000,houseAllowance:7000,medicalAllowance:2500,transportAllowance:2000,bankName:"Agrani Bank",bankAccount:"6677001122",education:"Bachelor's",experience:4,skills:"Accounting, Excel, Tally",notes:"Currently on extended leave"}
];

let currentPage = 1;
const rowsPerPage = 8;
let filteredData = [];
let selectedRows = new Set();
let currentEditId = null;
let deleteTargetId = null;
let currentView = 'table';

const avatarColors = ['#0f1d3f','#1e3a8a','#065f46','#5b21b6','#9d174d','#92400e','#1e40af','#7f1d1d','#14532d','#204b71'];
function getAvatarColor(name) { let s=0; for(let c of name) s+=c.charCodeAt(0); return avatarColors[s%avatarColors.length]; }
function getInitials(e) { return (e.firstName[0]+e.lastName[0]).toUpperCase(); }

document.getElementById('sidebarToggle').addEventListener('click', () => {
  document.getElementById('sidebar').classList.toggle('collapsed');
});
document.querySelectorAll('.has-submenu > a').forEach(link => {
  link.addEventListener('click', e => {
    e.preventDefault();
    const li = link.parentElement;
    const isOpen = li.classList.contains('open');
    document.querySelectorAll('.has-submenu').forEach(el => el.classList.remove('open'));
    if (!isOpen) li.classList.add('open');
  });
});

function updateStats() {
  const total = employeeData.length;
  const active = employeeData.filter(e=>e.status==='Active').length;
  const inactive = employeeData.filter(e=>e.status==='Inactive').length;
  const probation = employeeData.filter(e=>e.status==='Probation').length;
  const onLeave = employeeData.filter(e=>e.status==='On Leave').length;
  const depts = new Set(employeeData.map(e=>e.dept)).size;
  const totalPayroll = employeeData.reduce((s,e)=>s+e.salary+(e.houseAllowance||0)+(e.medicalAllowance||0)+(e.transportAllowance||0),0);
  const avgSalary = total>0 ? Math.round(totalPayroll/total) : 0;
  const d = {Technology:0,HR:0,Sales:0,Other:0};
  employeeData.forEach(e=>{if(e.dept==='Technology')d.Technology++;else if(e.dept==='HR')d.HR++;else if(e.dept==='Sales')d.Sales++;else d.Other++;});
  document.getElementById('s1Total').innerText = total;
  document.getElementById('s1Leave').innerText = onLeave;
  document.getElementById('s1Active').innerText = active;
  document.getElementById('s1Probation').innerText = probation;
  document.getElementById('s1Payroll').innerText = '৳'+totalPayroll.toLocaleString();
  document.getElementById('s1Avg').innerText = '৳'+avgSalary.toLocaleString();
  document.getElementById('d1').innerText = d.Technology;
  document.getElementById('d2').innerText = d.HR;
  document.getElementById('d3').innerText = d.Sales;
  document.getElementById('d4').innerText = d.Other;
  document.getElementById('bTotal').innerText = total;
  document.getElementById('bActInact').innerText = `${active} / ${inactive}`;
  document.getElementById('bActiveBar').style.width = total>0?`${(active/total)*100}%`:'0%';
  document.getElementById('bPayroll').innerText = '৳'+totalPayroll.toLocaleString();
  document.getElementById('bDepts').innerText = depts;
  document.getElementById('bLeave').innerText = onLeave;
}

function getStatusBadge(status) {
  const map={Active:'status-active',Inactive:'status-inactive',Probation:'status-probation','On Leave':'status-onleave'};
  const icon={Active:'fa-circle-check',Inactive:'fa-circle-xmark',Probation:'fa-clock','On Leave':'fa-calendar-minus'};
  return `<span class="status-badge ${map[status]||'status-inactive'}"><i class="fa-solid ${icon[status]||'fa-circle'}"></i> ${status}</span>`;
}
function getDeptBadge(dept) {
  return `<span class="dept-badge dept-${dept||'Admin'}">${dept||'—'}</span>`;
}

function applyFilters() {
  const status = document.getElementById('statusFilter').value;
  const dept = document.getElementById('deptFilter').value;
  const pos = document.getElementById('posFilter').value;
  const gender = document.getElementById('genderFilter').value;
  const search = document.getElementById('searchInput').value.toLowerCase() || document.getElementById('globalSearch').value.toLowerCase();
  filteredData = employeeData.filter(e => {
    const ms = status==='all' || e.status===status;
    const md = dept==='all' || e.dept===dept;
    const mp = pos==='all' || e.position.includes(pos);
    const mg = gender==='all' || e.gender===gender;
    const mq = !search || (e.firstName+' '+e.lastName).toLowerCase().includes(search) || e.id.toLowerCase().includes(search) || e.phone.includes(search) || e.email.toLowerCase().includes(search);
    return ms&&md&&mp&&mg&&mq;
  });
  currentPage=1; selectedRows.clear(); updateBulkBar(); renderAll();
}
function clearFilters() {
  ['statusFilter','deptFilter','posFilter','genderFilter'].forEach(id=>document.getElementById(id).value='all');
  document.getElementById('searchInput').value='';
  applyFilters();
}

function renderTable() {
  const tbody = document.getElementById('employeeBody');
  tbody.innerHTML = '';
  const start = (currentPage-1)*rowsPerPage;
  const pageData = filteredData.slice(start, start+rowsPerPage);
  document.getElementById('recordCount').textContent = `${filteredData.length} record${filteredData.length!==1?'s':''}`;
  if(pageData.length===0){
    tbody.innerHTML=`<tr><td colspan="10"><div class="empty-state"><i class="fa-solid fa-users"></i><h3>No employees found</h3><p>Try adjusting your filters or add a new employee</p></div></td></tr>`;
    updatePagination(); return;
  }
  pageData.forEach(e=>{
    const color=getAvatarColor(e.firstName+e.lastName);
    const inits=getInitials(e);
    const total=e.salary+(e.houseAllowance||0)+(e.medicalAllowance||0)+(e.transportAllowance||0);
    const row=document.createElement('tr');
    row.innerHTML=`
      <td><input type="checkbox" class="checkbox row-checkbox" data-id="${e.id}" ${selectedRows.has(e.id)?'checked':''} onchange="toggleRowSelection('${e.id}')"></td>
      <td><div class="emp-cell"><div class="emp-avatar" style="background:${color}">${inits}</div><div><div class="emp-name">${e.firstName} ${e.lastName}</div><div class="emp-email">${e.email}</div></div></div></td>
      <td><strong style="font-size:12px;color:var(--ink2);">${e.id}</strong></td>
      <td>${getDeptBadge(e.dept)}</td>
      <td>${e.position}</td>
      <td><i class="fa-solid fa-phone" style="color:var(--ink3);font-size:10px;margin-right:4px;"></i>${e.phone}</td>
      <td>${formatDate(e.joinDate)}</td>
      <td><div class="salary-bar"><span class="cur">৳</span>${total.toLocaleString()}</div></td>
      <td>${getStatusBadge(e.status)}</td>
      <td style="text-align:center;">
        <div class="action-dropdown">
          <button class="dropdown-toggle" onclick="toggleDropdown('${e.id}')"><i class="fa-solid fa-ellipsis-vertical"></i></button>
          <div class="dropdown-menu" id="dd-${e.id}">
            <button onclick="openViewModal('${e.id}')"><i class="fa-solid fa-eye"></i> View Profile</button>
            <button onclick="openEditModal('${e.id}')"><i class="fa-solid fa-edit"></i> Edit Employee</button>
            <hr>
            <button onclick="changeStatus('${e.id}','Active')"><i class="fa-solid fa-check-circle" style="color:var(--success)"></i> Set Active</button>
            <button onclick="changeStatus('${e.id}','On Leave')"><i class="fa-solid fa-calendar-minus" style="color:var(--info)"></i> Set On Leave</button>
            <button onclick="changeStatus('${e.id}','Inactive')"><i class="fa-solid fa-ban" style="color:var(--warning)"></i> Set Inactive</button>
            <hr>
            <button class="danger" onclick="openDeleteModal('${e.id}')"><i class="fa-solid fa-trash"></i> Delete</button>
          </div>
        </div>
      </td>
    `;
    tbody.appendChild(row);
  });
  updatePagination();
}

function renderGrid() {
  const grid=document.getElementById('gridView'); grid.innerHTML='';
  const start=(currentPage-1)*rowsPerPage;
  const pageData=filteredData.slice(start,start+rowsPerPage);
  if(pageData.length===0){grid.innerHTML=`<div style="grid-column:1/-1"><div class="empty-state"><i class="fa-solid fa-users"></i><h3>No employees found</h3><p>Adjust filters or add new employee</p></div></div>`;return;}
  pageData.forEach(e=>{
    const color=getAvatarColor(e.firstName+e.lastName);
    const card=document.createElement('div'); card.className='emp-card';
    card.innerHTML=`
      <div class="card-avatar" style="background:${color}">${getInitials(e)}</div>
      <div class="card-name">${e.firstName} ${e.lastName}</div>
      <div class="card-pos">${e.position}</div>
      <div class="card-badge-row">${getDeptBadge(e.dept)} ${getStatusBadge(e.status)}</div>
      <div style="font-size:11px;color:var(--ink3);"><i class="fa-solid fa-phone" style="margin-right:3px;"></i>${e.phone}</div>
      <div class="card-actions">
        <button class="card-btn" onclick="openViewModal('${e.id}')"><i class="fa-solid fa-eye"></i></button>
        <button class="card-btn" onclick="openEditModal('${e.id}')"><i class="fa-solid fa-edit"></i></button>
        <button class="card-btn del" onclick="openDeleteModal('${e.id}')"><i class="fa-solid fa-trash"></i></button>
      </div>
    `;
    grid.appendChild(card);
  });
}

function renderAll() { renderTable(); renderGrid(); }

function switchView(v) {
  currentView=v;
  document.getElementById('tableView').style.display=v==='table'?'block':'none';
  document.getElementById('gridView').classList.toggle('show',v==='grid');
  document.getElementById('tableViewBtn').classList.toggle('active',v==='table');
  document.getElementById('gridViewBtn').classList.toggle('active',v==='grid');
}

function updatePagination() {
  const tp=Math.ceil(filteredData.length/rowsPerPage);
  const start=(currentPage-1)*rowsPerPage;
  const end=Math.min(start+rowsPerPage,filteredData.length);
  document.getElementById('paginationInfo').innerText = filteredData.length===0?'No records found':`Showing ${start+1}–${end} of ${filteredData.length} records`;
  document.getElementById('prevBtn').disabled=currentPage===1;
  document.getElementById('nextBtn').disabled=currentPage===tp||tp===0;
}
function previousPage(){if(currentPage>1){currentPage--;renderAll();}}
function nextPage(){const tp=Math.ceil(filteredData.length/rowsPerPage);if(currentPage<tp){currentPage++;renderAll();}}

function toggleRowSelection(id){if(selectedRows.has(id))selectedRows.delete(id);else selectedRows.add(id);updateBulkBar();}
function toggleSelectAll(){
  const all=document.getElementById('selectAll').checked;
  const start=(currentPage-1)*rowsPerPage;
  filteredData.slice(start,start+rowsPerPage).forEach(e=>all?selectedRows.add(e.id):selectedRows.delete(e.id));
  renderAll(); updateBulkBar();
}
function updateBulkBar(){
  const count=selectedRows.size;
  document.getElementById('selectedCount').innerText=`${count} employee${count!==1?'s':''} selected`;
  document.getElementById('bulkActionsBar').classList.toggle('show',count>0);
}
function clearSelection(){selectedRows.clear();document.getElementById('selectAll').checked=false;renderAll();updateBulkBar();}
function bulkStatusChange(status){
  if(!selectedRows.size)return;
  selectedRows.forEach(id=>{const e=employeeData.find(e=>e.id===id);if(e)e.status=status;});
  showNotification(`${selectedRows.size} employee(s) set to ${status}`,'success');
  clearSelection(); applyFilters(); updateStats();
}
function changeStatus(id,status){
  const e=employeeData.find(e=>e.id===id);
  if(e){e.status=status;applyFilters();updateStats();showNotification(`${e.firstName} ${e.lastName} → ${status}`,'success');}
}

function openViewModal(id){
  const e=employeeData.find(e=>e.id===id); if(!e)return;
  const color=getAvatarColor(e.firstName+e.lastName);
  const total=e.salary+(e.houseAllowance||0)+(e.medicalAllowance||0)+(e.transportAllowance||0);
  const yrs=Math.floor((new Date()-new Date(e.joinDate))/(1000*60*60*24*365));
  document.getElementById('viewContent').innerHTML=`
    <div class="profile-banner">
      <div class="profile-avatar-lg" style="background:${color}">${getInitials(e)}</div>
      <div class="profile-info">
        <h3>${e.firstName} ${e.lastName}</h3>
        <p>${e.position} · ${e.dept}</p>
        <div class="profile-badges">
          <span class="profile-badge">${e.id}</span>
          <span class="profile-badge">${e.empType}</span>
          <span class="profile-badge">${e.status}</span>
          ${e.blood?`<span class="profile-badge">🩸 ${e.blood}</span>`:''}
        </div>
      </div>
    </div>
    <div class="detail-grid" style="margin-bottom:14px;">
      <div class="detail-item"><div class="detail-label"><i class="fa-solid fa-envelope"></i> Email</div><div class="detail-value">${e.email}</div></div>
      <div class="detail-item"><div class="detail-label"><i class="fa-solid fa-phone"></i> Phone</div><div class="detail-value">${e.phone}</div></div>
      <div class="detail-item"><div class="detail-label"><i class="fa-solid fa-cake-candles"></i> Date of Birth</div><div class="detail-value">${formatDate(e.dob)} (${calcAge(e.dob)} yrs)</div></div>
      <div class="detail-item"><div class="detail-label"><i class="fa-solid fa-venus-mars"></i> Gender</div><div class="detail-value">${e.gender||'—'}</div></div>
      <div class="detail-item"><div class="detail-label"><i class="fa-solid fa-location-dot"></i> Present Address</div><div class="detail-value">${e.address||'—'}</div></div>
      <div class="detail-item"><div class="detail-label"><i class="fa-solid fa-home"></i> Permanent Address</div><div class="detail-value">${e.permanentAddress||'—'}</div></div>
      <div class="detail-item"><div class="detail-label"><i class="fa-solid fa-id-card"></i> NID</div><div class="detail-value">${e.nid||'—'}</div></div>
      <div class="detail-item"><div class="detail-label"><i class="fa-solid fa-calendar-plus"></i> Join Date</div><div class="detail-value">${formatDate(e.joinDate)} (${yrs} yr${yrs!==1?'s':''})</div></div>
      <div class="detail-item"><div class="detail-label"><i class="fa-solid fa-user-tie"></i> Manager</div><div class="detail-value">${e.manager||'—'}</div></div>
      <div class="detail-item"><div class="detail-label"><i class="fa-solid fa-graduation-cap"></i> Education</div><div class="detail-value">${e.education||'—'} · ${e.experience} yr exp</div></div>
      <div class="detail-item"><div class="detail-label"><i class="fa-solid fa-phone-volume"></i> Emergency</div><div class="detail-value">${e.emergencyName||'—'} (${e.emergencyPhone||'—'})</div></div>
      <div class="detail-item"><div class="detail-label"><i class="fa-solid fa-bangladeshi-taka-sign"></i> Total Salary</div><div class="detail-value" style="color:var(--success);">৳${total.toLocaleString()}/mo</div></div>
    </div>
    <div style="background:var(--bg);border-radius:9px;padding:14px;margin-bottom:12px;">
      <div class="detail-label" style="margin-bottom:10px;"><i class="fa-solid fa-money-bill-breakdown"></i> Salary Breakdown</div>
      <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:10px;">
        ${[['Basic',e.salary],['House',e.houseAllowance],['Medical',e.medicalAllowance],['Transport',e.transportAllowance]].map(([l,v])=>`<div style="text-align:center;"><div style="font-size:11px;color:var(--ink3);margin-bottom:2px;">${l}</div><div style="font-weight:700;font-size:14px;">৳${(v||0).toLocaleString()}</div></div>`).join('')}
      </div>
    </div>
    ${e.skills?`<div style="background:var(--bg);border-radius:9px;padding:13px;margin-bottom:10px;"><div class="detail-label" style="margin-bottom:7px;"><i class="fa-solid fa-star"></i> Skills</div><div style="display:flex;flex-wrap:wrap;gap:5px;">${e.skills.split(',').map(s=>`<span style="background:var(--gold);color:white;padding:3px 9px;border-radius:20px;font-size:11px;">${s.trim()}</span>`).join('')}</div></div>`:''}
    ${e.notes?`<div style="background:#fef9c3;border-radius:9px;padding:13px;border-left:4px solid var(--warning);"><div class="detail-label" style="margin-bottom:5px;"><i class="fa-solid fa-note-sticky"></i> Notes</div><div style="font-size:13px;color:var(--ink2);">${e.notes}</div></div>`:''}
  `;
  document.getElementById('editFromView').onclick=()=>{closeViewModal();openEditModal(id);};
  document.getElementById('viewModal').classList.add('show');
}
function closeViewModal(){document.getElementById('viewModal').classList.remove('show');}

function openAddModal(){currentEditId=null;document.getElementById('empModalTitle').innerHTML='<i class="fa-solid fa-user-plus"></i> Add New Employee';clearForm();document.getElementById('empModal').classList.add('show');}
function openEditModal(id){const e=employeeData.find(e=>e.id===id);if(!e)return;currentEditId=id;document.getElementById('empModalTitle').innerHTML='<i class="fa-solid fa-user-edit"></i> Edit Employee';fillForm(e);document.getElementById('empModal').classList.add('show');}
function closeEmpModal(){document.getElementById('empModal').classList.remove('show');}
function clearForm(){['f_firstName','f_lastName','f_dob','f_nid','f_email','f_phone','f_address','f_permanentAddress','f_emergencyName','f_emergencyPhone','f_manager','f_salary','f_houseAllowance','f_medicalAllowance','f_transportAllowance','f_bankName','f_bankAccount','f_experience','f_skills','f_notes','f_joinDate'].forEach(id=>{const el=document.getElementById(id);if(el)el.value='';});['f_gender','f_blood','f_dept','f_position','f_empType','f_status','f_education'].forEach(id=>{const el=document.getElementById(id);if(el)el.selectedIndex=0;});}
function fillForm(e){const f={f_firstName:e.firstName,f_lastName:e.lastName,f_dob:e.dob,f_nid:e.nid,f_email:e.email,f_phone:e.phone,f_address:e.address,f_permanentAddress:e.permanentAddress,f_emergencyName:e.emergencyName,f_emergencyPhone:e.emergencyPhone,f_manager:e.manager,f_salary:e.salary,f_houseAllowance:e.houseAllowance,f_medicalAllowance:e.medicalAllowance,f_transportAllowance:e.transportAllowance,f_bankName:e.bankName,f_bankAccount:e.bankAccount,f_experience:e.experience,f_skills:e.skills,f_notes:e.notes,f_joinDate:e.joinDate,f_gender:e.gender,f_blood:e.blood,f_dept:e.dept,f_position:e.position,f_empType:e.empType,f_status:e.status,f_education:e.education};Object.entries(f).forEach(([id,v])=>{const el=document.getElementById(id);if(el)el.value=v||'';});}
function saveEmployee(){
  const fn=document.getElementById('f_firstName').value.trim(),ln=document.getElementById('f_lastName').value.trim(),em=document.getElementById('f_email').value.trim(),ph=document.getElementById('f_phone').value.trim(),dp=document.getElementById('f_dept').value,po=document.getElementById('f_position').value,jd=document.getElementById('f_joinDate').value,sl=parseFloat(document.getElementById('f_salary').value)||0;
  if(!fn||!ln||!em||!ph||!dp||!po||!jd||sl<=0){showNotification('Please fill in all required fields (*)','error');return;}
  const obj={id:currentEditId||generateId(),firstName:fn,lastName:ln,gender:document.getElementById('f_gender').value,dob:document.getElementById('f_dob').value,nid:document.getElementById('f_nid').value,blood:document.getElementById('f_blood').value,email:em,phone:ph,address:document.getElementById('f_address').value,permanentAddress:document.getElementById('f_permanentAddress').value,emergencyName:document.getElementById('f_emergencyName').value,emergencyPhone:document.getElementById('f_emergencyPhone').value,dept:dp,position:po,empType:document.getElementById('f_empType').value,joinDate:jd,status:document.getElementById('f_status').value,manager:document.getElementById('f_manager').value,salary:sl,houseAllowance:parseFloat(document.getElementById('f_houseAllowance').value)||0,medicalAllowance:parseFloat(document.getElementById('f_medicalAllowance').value)||0,transportAllowance:parseFloat(document.getElementById('f_transportAllowance').value)||0,bankName:document.getElementById('f_bankName').value,bankAccount:document.getElementById('f_bankAccount').value,education:document.getElementById('f_education').value,experience:parseInt(document.getElementById('f_experience').value)||0,skills:document.getElementById('f_skills').value,notes:document.getElementById('f_notes').value};
  if(currentEditId){const idx=employeeData.findIndex(e=>e.id===currentEditId);if(idx>-1)employeeData[idx]=obj;showNotification(`${fn} ${ln} updated successfully`,'success');}
  else{employeeData.push(obj);showNotification(`${fn} ${ln} added successfully`,'success');}
  closeEmpModal();applyFilters();updateStats();
}
function generateId(){const max=employeeData.reduce((m,e)=>Math.max(m,parseInt(e.id.replace('EMP',''))),0);return 'EMP'+String(max+1).padStart(3,'0');}

function openDeleteModal(id){const e=employeeData.find(e=>e.id===id);if(!e)return;deleteTargetId=id;document.getElementById('deleteMessage').innerHTML=`Are you sure you want to permanently delete<br><span class="confirm-name">${e.firstName} ${e.lastName} (${e.id})</span>?<br><span style="font-size:12px;color:var(--ink3);">This action cannot be undone.</span>`;document.getElementById('deleteModal').classList.add('show');}
function closeDeleteModal(){document.getElementById('deleteModal').classList.remove('show');deleteTargetId=null;}
function confirmDelete(){if(!deleteTargetId)return;const emp=employeeData.find(e=>e.id===deleteTargetId);employeeData=employeeData.filter(e=>e.id!==deleteTargetId);closeDeleteModal();applyFilters();updateStats();showNotification(`${emp.firstName} ${emp.lastName} removed`,'success');}

function toggleDropdown(id){document.querySelectorAll('.dropdown-menu').forEach(m=>{if(m.id!==`dd-${id}`)m.classList.remove('show');});document.getElementById(`dd-${id}`).classList.toggle('show');}
document.addEventListener('click',e=>{if(!e.target.closest('.action-dropdown'))document.querySelectorAll('.dropdown-menu').forEach(m=>m.classList.remove('show'));});

function exportToExcel(){
  const data=filteredData.map(e=>({'ID':e.id,'First Name':e.firstName,'Last Name':e.lastName,'Gender':e.gender,'DOB':e.dob,'Blood':e.blood,'Email':e.email,'Phone':e.phone,'Department':e.dept,'Position':e.position,'Type':e.empType,'Join Date':e.joinDate,'Status':e.status,'Basic Salary':e.salary,'Total Salary':e.salary+(e.houseAllowance||0)+(e.medicalAllowance||0)+(e.transportAllowance||0),'Skills':e.skills,'Notes':e.notes}));
  const ws=XLSX.utils.json_to_sheet(data),wb=XLSX.utils.book_new();
  XLSX.utils.book_append_sheet(wb,ws,'Employee List');
  XLSX.writeFile(wb,'Promee_Employee_List.xlsx');
  showNotification('Exported to Excel successfully','success');
}

function showNotification(msg,type='success'){
  const icons={success:'check-circle',error:'exclamation-circle',warning:'triangle-exclamation'};
  const titles={success:'Success',error:'Error',warning:'Warning'};
  const n=document.createElement('div'); n.className=`notification ${type}`;
  n.innerHTML=`<div class="notif-content"><div class="notif-icon ${type}"><i class="fa-solid fa-${icons[type]}"></i></div><div><div class="notif-title">${titles[type]}</div><div class="notif-text">${msg}</div></div></div>`;
  document.body.appendChild(n);
  setTimeout(()=>{n.style.animation='slideInRight 0.3s ease reverse';setTimeout(()=>n.remove(),300);},3200);
}

function formatDate(d){if(!d)return'—';return new Date(d).toLocaleDateString('en-GB',{day:'2-digit',month:'short',year:'numeric'});}
function calcAge(d){if(!d)return'—';return Math.floor((new Date()-new Date(d))/(1000*60*60*24*365));}

window.addEventListener('click',e=>{
  if(e.target===document.getElementById('viewModal'))closeViewModal();
  if(e.target===document.getElementById('empModal'))closeEmpModal();
  if(e.target===document.getElementById('deleteModal'))closeDeleteModal();
});

document.getElementById('globalSearch').addEventListener('input',function(){
  document.getElementById('searchInput').value=this.value;
  applyFilters();
});
document.getElementById('searchInput').addEventListener('input',applyFilters);
['statusFilter','deptFilter','posFilter','genderFilter'].forEach(id=>document.getElementById(id).addEventListener('change',applyFilters));

filteredData=[...employeeData];
renderAll();
updateStats();
</script>
</body>
</html>